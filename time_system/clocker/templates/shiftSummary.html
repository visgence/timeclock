{%extends "base.html"%}

{% block additional-headers %}
    <script src="{{STATIC_URL}}js/job_slider.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/shiftSummary.css"/>
{% endblock %}

{%block content%}
<div >

    <span class="shiftInOut">{{shift.time_in}} - {{shift.time_out}}</span>

    <table border="0">
        <tr class="total_time_text">
        	<td></td>
            <td><b>Total Time Worked</b></td>
            <td>
                <script>
                    console.log('testing');
                    console.log({{totalTime}});
                </script>
                <input type="text" class="total_time form-control" id="total_time" value="{{totalTime}}" readonly="readonly">
            </td>
        </tr>
        {% for data in jobData %}
        <tr>            
             <td>
                 <span class="ui-icon ui-icon-circle-triangle-e toggle-button"
                 onclick="toggle_section('sub-{{data.job.name|slugify}}', this);">
                 </span>
             </td>
             <td>
                 <div class="job_name">{{data.job.name}}</div>
             </td>
             <td>
                {% if data.hours %}
                    <input type="text" class="job_time form-control" id ="hours_{{data.job.id}}" value="{{data.hours}}" readonly="readonly" />
                {% else %}
                    <input type="text" class="job_time form-control" id ="hours_{{data.job.id}}" readonly="readonly" />
                {% endif %}
             </td>
             <td><div id="{{data.job.id}}" class="job_slider"></div></td>
        </tr>
             
        <tr class="collapsible" id="sub-{{data.job.name|slugify}}" style="display:none;">
            <td colspan="4">
                <div class="miles_text">Miles:</div>
                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                    {% if data.miles %}
                        <input type="number" class="miles form-control" value="{{data.miles}}" id="miles_{{data.job.id}}">
                    {% else %}
                        <input type="number" class="miles form-control" value="0" id="miles_{{data.job.id}}">
                    {% endif %}
                </div>
                <br/> 
                <div class="notes_text">Notes:</div>
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                    <textarea  class="text_area form-control" rows="5" COLS="50" id="notes_{{data.job.id}}">{{data.note}}</textarea>
                </div>
            </td>
        </tr>
        {% endfor %} 
    </table> 
    {% if owner %}
        <input type="button" class="submit btn btn-primary" value="Submit" onClick="submit_form('{% url 'save-summaries'  %}')">
        <input type="hidden" id="emp_id" value="{{user.id}}">
        <input type="hidden" id="shift_id" value="{{shift.id}}">
    {% endif %}

        <div id ="debug"> </div>

    </div>

    <script>
        $(function() {
            $('.toggle-button').button();
        });
    </script>
{%endblock%}
