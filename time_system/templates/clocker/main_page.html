
{% load dajaxice_templatetags %}
<html>
    <head>
        {% dajaxice_js_import %}
        <script src="/static/clocker/js/js/jquery-1.8.3.min.js" type="text/javascript"></script>
        <script src="/static/clocker/js/jquery-ui-1.10.3.custom.min.js" type="text/javascript"></script>
        <script src="/static/clocker/js/js/jquery-ui-timepicker-addon.js" type="text/javascript"></script>
        <script src="/static/clocker/js/js/management.js" type="text/javascript"></script>
        <link rel="stylesheet" type="text/css" href="/static/clocker/css/jquery-ui-1.10.3.custom.min.css"/>
        <link rel="stylesheet" type="text/css" href="/static/clocker/main_page.css"/>
        
        
        <script src="{{STATIC_URL}}js/chucho.js" type="text/javascript"></script>
        <script type="text/javascript" src="{{STATIC_URL}}js/spin.min.js"></script>

        <script type="text/javascript" src="{{STATIC_URL}}plugins/slickGrid/lib/jquery.event.drag-2.2.js"></script>    
        <script type="text/javascript" src="{{STATIC_URL}}plugins/slickGrid/slick.core.js"></script>
        <script type="text/javascript" src="{{STATIC_URL}}plugins/slickGrid/plugins/slick.rowselectionmodel.js"></script>
        <script type="text/javascript" src="{{STATIC_URL}}plugins/slickGrid/slick.formatters.js"></script>
        <script type="text/javascript" src="{{STATIC_URL}}plugins/slickGrid/slick.editors.js"></script>
        <script type="text/javascript" src="{{STATIC_URL}}plugins/slickGrid/slick.grid.js"></script>

        <link rel="stylesheet" type="text/css" href="{{STATIC_URL}}plugins/slickGrid/slick.grid.css">
        <link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/grid.css">


        <style>
            #ui-datepicker-div { font-size: 12px; }
        </style>
        
        <script>
            $(document).ready(function() 
            {
                var dates = $( "#from, #to" ).datepicker(
                {
                    changeMonth: true,
                    numberOfMonths: 1,
                    dateFormat: 'yy-mm-dd',
                    onSelect: function( selectedDate ) 
                    {
                        var option = this.id == "from" ? "minDate" : "maxDate",
                        instance = $( this ).data( "datepicker" ),
                        date = $.datepicker.parseDate(
                        instance.settings.dateFormat ||
                        $.datepicker._defaults.dateFormat,
                        selectedDate, instance.settings );
                        dates.not( this ).datepicker( "option", option, date );
                    }
                });
            });
        </script>

    </head>

    <body> 

        <div id="content">

            <div>
                {% if user.first_name %}
                    Hello {{user.first_name}} {{user.last_name}} (<a href="/logout/">logout</a>)
                {% endif %}
            </div>

            <div align="left">
                <form name="admin" action="hours/" method="post">
                    {% csrf_token %}

                    <table style="border-style: none;">

                        <tr>
                            <th colspan="2">View Hours(Admin)</th>
                        </tr>

                        <tr>
                            <td>From </td>
                            <td> <input type="text" id="from" name="from"/> </td>
                        </tr>

                        <tr>
                            <td>To</td>
                            <td> <input type="text" id="to" name="to"/>  </td>
                        </tr>

                        <tr>
                            <td>Employee</td>
                            <td> 

                                <select name="user_name">
                                    {% if is_admin %}
                                        {% for emp in employee %}
                                            {% if emp.is_active %}
                                                <option value="{{emp.username}}">{{emp}}</option>
                                            {% endif %}
                                        {% endfor %}
                                    {% else %}
                                        <option value="{{user.username}}">{{user.username}}</option>
                                    {% endif %}
                                </select> 
                            </td>
                        </tr>

                        <tr>
                            <td></td>
                            <td> <input type="submit" value="Submit" name="Submit"></td>
                        </tr>

                    </table>

                </form>
            </div>


            <div id="management">
                {% if is_admin %}
                <span class="clickable" id="manage_employees" onclick="load_model_grid('clocker', 'Employee');">
                    Manage Employees
                </span>
                <br/>
                <span class="clickable" id="manage_jobs" onclick="load_model_grid('clocker', 'Job');">
                    Manage Jobs
                </span>

                {% endif %}
                <br/>
                <span class="clickable" id="manage_shift_summaries" onclick="load_model_grid('clocker', 'ShiftSummary');">
                    Manage Shift Summaries
                </span>
                <br/>
                <span class="clickable" id="manage_shift_shifts" onclick="load_model_grid('clocker', 'Shift');">
                    Manage Shifts
                </span>
            </div>

            <div id="management_content" style="position: absolute;"></div>


            <div class="login">
                <form name="main_page" method="post">
                    {% csrf_token %}

                    <div class="radio_buttons">
                        {% ifequal user_status "out" %}
                            <input id="status-in" type="radio" name="status" value="In" checked="checked">
                            <label for="status-in">Clock In</label>
                            <br>
                            <input id="status-out" type="radio" name="status" value="Out" disabled="disabled">
                            <label for="status-out">Clock Out</label>
                            <br>
                        {% else %}
                            <input id="status-in" type="radio" name="status" value="In" disabled="disabled">
                            <label for="status-in">Clock In</label>
                            <br>
                            <input id="status-out" type="radio" name="status" value="Out" checked="checked">
                            <label for="status-out">Clock Out</label>
                            <br>
                        {% endifequal %}
                    <input type="submit" value="Submit">
                    </div>
                </form>

                <div class="message">

                    {% ifequal error "none" %}

                        {% ifequal status "out" %}  
                            {{ message }}
                            {{ time_stamp }}
                        {% endifequal %}

                        {% ifequal status "in" %}
                            {{ message }}
                            {{ time_stamp }}
                        {% endifequal %}
                            
                    {% else %}

                        {% ifequal error "exception" %}
                            An unexpected error occured.  Maybe try logging out and then back in.
                        {% endifequal %}

                        {% ifequal error "out" %}
                            You are not able to clock out right now. Please clock in first.
                        {% endifequal %}

                        {% ifequal error "in" %}
                            You are not able to clock in right now. Please clock out first.
                        {% endifequal %}

                    {% endifequal %}

                </div> <!--End message-->

            </div> <!--End login-->

        </div> <!--End content-->

    </body>

</html>
